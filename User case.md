User case

US-1: Создание комнаты

Use Case UC-001: Создать комнату

Акторы: Пользователь (Создатель)  
 Цель: Создать новую комнату для совместного просмотра  
 Предусловия: Пользователь авторизован в системе

Основной поток:

1. Пользователь нажимает кнопку "Создать комнату" на главной странице  
2. Система отображает форму создания комнаты с полями:  
   * Название комнаты (обязательное)  
   * Описание и фото комнаты (опциональное)  
   * Настройки приватности  
3. Пользователь заполняет необходимые поля и нажимает "Создать"  
4. Система создает комнату с уникальным ID  
5. Система устанавливает пользователя создателем комнаты  
6. Система перенаправляет пользователя на страницу созданной комнаты  
7. Система отображает интерфейс комнаты с ссылкой-приглашением

Альтернативный поток A: Не заполнены обязательные поля

text

3а. Пользователь не заполняет название комнаты

3б. Система показывает сообщение "Заполните название комнаты"

3в. Use Case продолжается с шага 2

Постусловия:

* Комната создана в статусе "ожидание"  
* Создатель становится участником комнаты  
* Генерируется уникальная ссылка-приглашении

US-2: Просмотр и вступление в комнату

Use Case UC-002: Вступить в комнату

Акторы: Пользователь (Участник)  
 Цель: Найти и присоединиться к существующей комнате  
 Предусловия: Пользователь авторизован, существуют активные комнаты

Основной поток:

1. Пользователь переходит на главную страницу  
2. Система отображает список активных комнат с информацией:  
   * Название комнаты  
   * Количество участников  
   * Статус (ожидание, выбор фильма, просмотр)  
   * Создатель комнаты  
3. Пользователь выбирает комнату из списка  
4. Пользователь нажимает кнопку "Присоединиться"  
5. Система добавляет пользователя в список участников комнаты  
6. Система перенаправляет пользователя на страницу комнаты  
7. Система обновляет интерфейс для всех участников комнаты

Альтернативный поток A: Комната заполнена

4а. В комнате достигнут лимит участников

4б. Система показывает сообщение "Комната заполнена"

4в. Use Case продолжается с шага 2

Альтернативный поток B: Пользователь уже в комнате

4а. Пользователь уже является участником этой комнаты

4б. Система перенаправляет в комнату

4в. Use Case завершается

US-3 \+ US-4: Процесс выбора фильма

Use Case UC-003: Начать сбор предложений

Акторы: Создатель комнаты  
 Цель: Запустить процесс предложения фильмов участниками  
 Предусловия: Пользователь \- создатель комнаты, комната в статусе "ожидание"

Основной поток:

1. Создатель нажимает кнопку "Начать выбор фильма"  
2. Система меняет статус комнаты на "сбор предложений"  
3. Система активирует интерфейс предложения фильмов для участников  
4. Система показывает таймер сбора предложений (опционально)  
5. Система уведомляет всех участников о начале сбора предложений

Постусловия:

* Комната переходит в статус "сбор предложений"  
* Участники могут предлагать фильмы

Use Case UC-004: Предложить фильм

Акторы: Участник комнаты, Система Кинопоиск  
 Цель: Найти и предложить фильм для просмотра  
 Предусловия: Пользователь в комнате со статусом "сбор предложений"

Основной поток:

1. Участник нажимает кнопку "Предложить фильм"  
2. Система открывает модальное окно поиска  
3. Участник вводит название фильма на русском или оригинальном языке  
4. Участник нажимает кнопку "Найти"  
5. Система отправляет запрос к API Кинопоиска  
6. Система получает и отображает результаты поиска:  
   * Постер фильма  
   * Название (русское и оригинальное)  
   * Год выпуска  
   * Рейтинг Кинопоиска  
   * Краткое описание  
7. Участник выбирает фильм из результатов  
8. Участник нажимает "Предложить"  
9. Система добавляет фильм в список номинаций комнаты  
10. Система обновляет интерфейс для всех участников  
11. Система показывает подтверждение "Фильм предложен"

Альтернативный поток A: Фильм не найден

6а. API Кинопоиска возвращает пустой результат

6б. Система показывает сообщение "Фильмы не найдены. Попробуйте изменить запрос"

6в. Use Case продолжается с шага 3

Альтернативный поток B: Фильм уже предложен

8а. Выбранный фильм уже есть в списке номинаций

8б. Система показывает сообщение "Этот фильм уже предложен"

8в. Use Case продолжается с шага 3

US-5: Случайный выбор фильма

Use Case UC-005: Запустить случайный выбор

Акторы: Создатель комнаты  
 Цель: Выбрать случайный фильм из предложенных для просмотра  
 Предусловия: Комната в статусе "сбор предложений", есть ≥2 предложенных фильма

Основной поток:

1. Создатель нажимает кнопку "Выбрать фильм"  
2. Система проверяет количество предложенных фильмов (минимум 2\)  
3. Система запускает анимацию случайного выбора  
4. Система случайным образом выбирает один фильм из предложенных  
5. Система устанавливает выбранный фильм как текущий для комнаты  
6. Система меняет статус комнаты на "просмотр"  
7. Система уведомляет всех участников о выбранном фильме  
8. Система отображает видеоплеер с выбранным фильмом

Альтернативный поток A: Недостаточно предложений

text

2а. Предложено менее 2 фильмов

2б. Система показывает сообщение "Нужно минимум 2 предложения"

2в. Use Case завершается  
---

US-6 \+ US-7 \+ US-8: Просмотр фильма

Use Case UC-006: Синхронный просмотр

Акторы: Создатель комнаты, Участники комнаты  
 Цель: Обеспечить синхронизированный просмотр фильма всеми участниками  
 Предусловия: Выбран фильм для просмотра, комната в статусе "просмотр"

Основной поток:

1. Создатель нажимает кнопку "Начать просмотр" в плеере  
2. Система запускает воспроизведение фильма у всех участников одновременно  
3. Любой участник нажимает кнопку "Пауза"  
4. Система приостанавливает воспроизведение у всех участников  
5. Любой участник нажимает кнопку "Продолжить"  
6. Система возобновляет воспроизведение у всех участников  
7. Любой участник изменяет позицию просмотра (перемотка)  
8. Система синхронизирует позицию просмотра у всех участников  
9. Участник регулирует громкость с помощью ползунка громкости  
10. Система изменяет громкость локально для пользователя

Альтернативный поток A: Потеря соединения

text

3а. У участника пропадает соединение с сервером

3б. Система показывает сообщение "Потеряно соединение. Переподключение..."

3в. Система автоматически переподключается и синхронизирует состояние  
---

US-9: Оценка фильма

Use Case UC-007: Оценить фильм

Акторы: Участник комнаты  
 Цель: Поставить оценку просмотренному фильму  
 Предусловия: Просмотр фильма завершен, комната в статусе "оценка"

Основной поток:

1. Система автоматически переводит комнату в статус "оценка" после завершения фильма  
2. Система отображает интерфейс оценки с рейтинг-звездами (1-10)  
3. Участник выбирает оценку от 1 до 10 звезд  
4. Участник нажимает кнопку "Отправить оценку"  
5. Система сохраняет оценку пользователя  
6. Система обновляет общий рейтинг фильма в комнате  
7. Система показывает подтверждение "Оценка сохранена"

Альтернативный поток A: Пользователь уже оценил фильм

text

4а. Пользователь уже отправил оценку для этого фильма

4б. Система показывает сообщение "Вы уже оценили этот фильм"

4в. Use Case завершается  
---

US-10: Чат комнаты

Use Case UC-008: Общение в чате

Акторы: Участник комнаты  
 Цель: Обмениваться сообщениями с другими участниками во время просмотра  
 Предусловия: Пользователь является участником активной комнаты

Основной поток:

1. Участник открывает панель чата в интерфейсе комнаты  
2. Участник вводит текстовое сообщение в поле ввода  
3. Участник нажимает кнопку "Отправить" или Enter  
4. Система проверяет сообщение на наличие запрещенного контента  
5. Система доставляет сообщение всем участникам комнаты в реальном времени  
6. Система отображает сообщение в чате с указанием:  
   * Имя отправителя  
   * Время отправки  
   * Текст сообщения

Альтернативный поток A: Пустое сообщение

text

3а. Пользователь пытается отправить пустое сообщение

3б. Система блокирует отправку

3в. Use Case продолжается с шага 2  
---

US-11: Статистика просмотров

Use Case UC-009: Просмотр статистики

Акторы: Участник комнаты  
 Цель: Посмотреть историю и статистику просмотренных фильмов  
 Предусловия: Пользователь является участником комнаты

Основной поток:

1. Участник нажимает вкладку "Статистика" в интерфейсе комнаты  
2. Система отображает список просмотренных фильмов с информацией:  
   * Постер и название фильма  
   * Дата просмотра  
   * Средний рейтинг в комнате  
   * Количество участников, оценивших фильм  
   * Индивидуальная оценка пользователя (если ставил)  
3. Участник выбирает конкретный фильм из списка  
4. Система показывает детальную информацию о фильме:  
   * Полное описание  
   * Режиссер и актерский состав  
   * Рейтинг Кинопоиска  
   * Все оценки участников комнаты (анонимно)

---

US-12 \+ US-13: Управление участием

Use Case UC-010: Выйти из комнаты

Акторы: Участник комнаты  
 Цель: Покинуть комнату и прекратить участие в просмотрах  
 Предусловия: Пользователь является участником комнаты

Основной поток:

1. Участник нажимает кнопку "Меню" в интерфейсе комнаты  
2. Участник выбирает опцию "Выйти из комнаты"  
3. Система показывает диалог подтверждения  
4. Участник подтверждает выход  
5. Система удаляет пользователя из списка участников комнаты  
6. Система перенаправляет пользователя на главную страницу  
7. Система уведомляет остальных участников о выходе пользователя

Альтернативный поток A: Пользователь \- создатель комнаты

text

2а. Пользователь является создателем комнаты

2б. Система показывает предупреждение "Вы создатель комнаты. При выходе комната будет удалена"

2в. Use Case переходит к UC-012 (Удалить комнату)  
---

Use Case UC-011: Переключение между комнатами

Акторы: Пользователь  
 Цель: Участвовать в нескольких комнатах одновременно  
 Предусловия: Пользователь авторизован, участник нескольких комнат

Основной поток:

1. Пользователь открывает выпадающий список комнат в заголовке приложения  
2. Система показывает список всех комнат, где пользователь является участником  
3. Пользователь выбирает комнату из списка  
4. Система перенаправляет пользователя в выбранную комнату  
5. Система загружает и отображает интерфейс выбранной комнаты

---

US-14: Передача прав

Use Case UC-012: Передать права создателя

Акторы: Создатель комнаты  
 Цель: Передать роль создателя другому участнику  
 Предусловия: Пользователь \- создатель комнаты, в комнате есть другие участники

Основной поток:

1. Создатель открывает меню управления комнатой  
2. Создатель выбирает опцию "Передать права создателя"  
3. Система отображает список участников комнаты  
4. Создатель выбирает участника из списка  
5. Создатель подтверждает передачу прав  
6. Система передает права создателя выбранному участнику  
7. Система уведомляет всех участников о смене создателя  
8. Система обновляет интерфейс для нового создателя

Альтернативный поток A: Пользователь отменяет передачу

text

5а. Создатель отменяет передачу прав

5б. Система закрывает диалог выбора

5в. Use Case завершается  
---

US-15: Удаление комнаты

Use Case UC-013: Удалить комнату

Акторы: Создатель комнаты  
 Цель: Полностью удалить комнату и всю связанную статистику  
 Предусловия: Пользователь \- создатель комнаты

Основной поток:

1. Создатель открывает меню управления комнатой  
2. Создатель выбирает опцию "Удалить комнату"  
3. Система показывает диалог подтверждения с предупреждением:  
   * "Вся статистика просмотров будет удалена"  
   * "Это действие нельзя отменить"  
4. Создатель вводит название комнаты для подтверждения  
5. Создатель нажимает кнопку "Удалить навсегда"  
6. Система удаляет все данные комнаты:  
   * Информацию о комнате  
   * Список номинаций  
   * Оценки фильмов  
   * Сообщения чата  
7. Система уведомляет всех участников об удалении комнаты  
8. Система перенаправляет создателя на главную страницу

Альтернативный поток A: Неправильное подтверждение

text

4а. Создатель вводит неправильное название комнаты

4б. Система показывает ошибку "Название не совпадает"

4в. Use Case продолжается с шага 3

US-1: Создание комнаты

Use Case UC-001: Создать комнату

Акторы: Пользователь (Создатель)  
 Цель: Создать новую комнату для совместного просмотра  
 Предусловия: Пользователь авторизован в системе

Основной поток:

1. Пользователь нажимает кнопку "Создать комнату" на главной странице  
2. Система отображает форму создания комнаты с полями:  
   * Название комнаты (обязательное)  
   * Описание (опциональное)  
   * Настройки приватности  
3. Пользователь заполняет необходимые поля и нажимает "Создать"  
4. Система создает комнату с уникальным ID  
5. Система устанавливает пользователя создателем комнаты  
6. Система перенаправляет пользователя на страницу созданной комнаты  
7. Система отображает интерфейс комнаты с ссылкой-приглашением

Альтернативный поток A: Не заполнены обязательные поля

text

3а. Пользователь не заполняет название комнаты

3б. Система показывает сообщение "Заполните название комнаты"

3в. Use Case продолжается с шага 2

Постусловия:

* Комната создана в статусе "ожидание"  
* Создатель становится участником комнаты  
* Генерируется уникальная ссылка-приглашение

---

US-2: Просмотр и вступление в комнату

Use Case UC-002: Вступить в комнату

Акторы: Пользователь (Участник)  
 Цель: Найти и присоединиться к существующей комнате  
 Предусловия: Пользователь авторизован, существуют активные комнаты

Основной поток:

1. Пользователь переходит на главную страницу  
2. Система отображает список активных комнат с информацией:  
   * Название комнаты  
   * Количество участников  
   * Статус (ожидание, выбор фильма, просмотр)  
   * Создатель комнаты  
3. Пользователь выбирает комнату из списка  
4. Пользователь нажимает кнопку "Присоединиться"  
5. Система добавляет пользователя в список участников комнаты  
6. Система перенаправляет пользователя на страницу комнаты  
7. Система обновляет интерфейс для всех участников комнаты

Альтернативный поток A: Комната заполнена

text

4а. В комнате достигнут лимит участников

4б. Система показывает сообщение "Комната заполнена"

4в. Use Case продолжается с шага 2

Альтернативный поток B: Пользователь уже в комнате

text

4а. Пользователь уже является участником этой комнаты

4б. Система перенаправляет в комнату

4в. Use Case завершается  
---

US-3 \+ US-4: Процесс выбора фильма

Use Case UC-003: Начать сбор предложений

Акторы: Создатель комнаты  
 Цель: Запустить процесс предложения фильмов участниками  
 Предусловия: Пользователь \- создатель комнаты, комната в статусе "ожидание"

Основной поток:

1. Создатель нажимает кнопку "Начать выбор фильма"  
2. Система меняет статус комнаты на "сбор предложений"  
3. Система активирует интерфейс предложения фильмов для участников  
4. Система показывает таймер сбора предложений (опционально)  
5. Система уведомляет всех участников о начале сбора предложений

Постусловия:

* Комната переходит в статус "сбор предложений"  
* Участники могут предлагать фильмы

---

Use Case UC-004: Предложить фильм

Акторы: Участник комнаты, Система Кинопоиск  
 Цель: Найти и предложить фильм для просмотра  
 Предусловия: Пользователь в комнате со статусом "сбор предложений"

Основной поток:

1. Участник нажимает кнопку "Предложить фильм"  
2. Система открывает модальное окно поиска  
3. Участник вводит название фильма на русском или оригинальном языке  
4. Участник нажимает кнопку "Найти"  
5. Система отправляет запрос к API Кинопоиска  
6. Система получает и отображает результаты поиска:  
   * Постер фильма  
   * Название (русское и оригинальное)  
   * Год выпуска  
   * Рейтинг Кинопоиска  
   * Краткое описание  
7. Участник выбирает фильм из результатов  
8. Участник нажимает "Предложить"  
9. Система добавляет фильм в список номинаций комнаты  
10. Система обновляет интерфейс для всех участников  
11. Система показывает подтверждение "Фильм предложен"

Альтернативный поток A: Фильм не найден

text

6а. API Кинопоиска возвращает пустой результат

6б. Система показывает сообщение "Фильмы не найдены. Попробуйте изменить запрос"

6в. Use Case продолжается с шага 3

Альтернативный поток B: Фильм уже предложен

text

8а. Выбранный фильм уже есть в списке номинаций

8б. Система показывает сообщение "Этот фильм уже предложен"

8в. Use Case продолжается с шага 3  
---

US-5: Случайный выбор фильма

Use Case UC-005: Запустить случайный выбор

Акторы: Создатель комнаты  
 Цель: Выбрать случайный фильм из предложенных для просмотра  
 Предусловия: Комната в статусе "сбор предложений", есть ≥2 предложенных фильма

Основной поток:

1. Создатель нажимает кнопку "Выбрать фильм"  
2. Система проверяет количество предложенных фильмов (минимум 2\)  
3. Система запускает анимацию случайного выбора  
4. Система случайным образом выбирает один фильм из предложенных  
5. Система устанавливает выбранный фильм как текущий для комнаты  
6. Система меняет статус комнаты на "просмотр"  
7. Система уведомляет всех участников о выбранном фильме  
8. Система отображает видеоплеер с выбранным фильмом

Альтернативный поток A: Недостаточно предложений

text

2а. Предложено менее 2 фильмов

2б. Система показывает сообщение "Нужно минимум 2 предложения"

2в. Use Case завершается  
---

US-6 \+ US-7 \+ US-8: Просмотр фильма

Use Case UC-006: Синхронный просмотр

Акторы: Создатель комнаты, Участники комнаты  
 Цель: Обеспечить синхронизированный просмотр фильма всеми участниками  
 Предусловия: Выбран фильм для просмотра, комната в статусе "просмотр"

Основной поток:

1. Создатель нажимает кнопку "Начать просмотр" в плеере  
2. Система запускает воспроизведение фильма у всех участников одновременно  
3. Любой участник нажимает кнопку "Пауза"  
4. Система приостанавливает воспроизведение у всех участников  
5. Любой участник нажимает кнопку "Продолжить"  
6. Система возобновляет воспроизведение у всех участников  
7. Любой участник изменяет позицию просмотра (перемотка)  
8. Система синхронизирует позицию просмотра у всех участников  
9. Участник регулирует громкость с помощью ползунка громкости  
10. Система изменяет громкость локально для пользователя

Альтернативный поток A: Потеря соединения

text

3а. У участника пропадает соединение с сервером

3б. Система показывает сообщение "Потеряно соединение. Переподключение..."

3в. Система автоматически переподключается и синхронизирует состояние  
---

US-9: Оценка фильма

Use Case UC-007: Оценить фильм

Акторы: Участник комнаты  
 Цель: Поставить оценку просмотренному фильму  
 Предусловия: Просмотр фильма завершен, комната в статусе "оценка"

Основной поток:

1. Система автоматически переводит комнату в статус "оценка" после завершения фильма  
2. Система отображает интерфейс оценки с рейтинг-звездами (1-10)  
3. Участник выбирает оценку от 1 до 10 звезд  
4. Участник нажимает кнопку "Отправить оценку"  
5. Система сохраняет оценку пользователя  
6. Система обновляет общий рейтинг фильма в комнате  
7. Система показывает подтверждение "Оценка сохранена"

Альтернативный поток A: Пользователь уже оценил фильм

text

4а. Пользователь уже отправил оценку для этого фильма

4б. Система показывает сообщение "Вы уже оценили этот фильм"

4в. Use Case завершается  
---

US-10: Чат комнаты

Use Case UC-008: Общение в чате

Акторы: Участник комнаты  
 Цель: Обмениваться сообщениями с другими участниками во время просмотра  
 Предусловия: Пользователь является участником активной комнаты

Основной поток:

1. Участник открывает панель чата в интерфейсе комнаты  
2. Участник вводит текстовое сообщение в поле ввода  
3. Участник нажимает кнопку "Отправить" или Enter  
4. Система проверяет сообщение на наличие запрещенного контента  
5. Система доставляет сообщение всем участникам комнаты в реальном времени  
6. Система отображает сообщение в чате с указанием:  
   * Имя отправителя  
   * Время отправки  
   * Текст сообщения

Альтернативный поток A: Пустое сообщение

text

3а. Пользователь пытается отправить пустое сообщение

3б. Система блокирует отправку

3в. Use Case продолжается с шага 2  
---

US-11: Статистика просмотров

Use Case UC-009: Просмотр статистики

Акторы: Участник комнаты  
 Цель: Посмотреть историю и статистику просмотренных фильмов  
 Предусловия: Пользователь является участником комнаты

Основной поток:

1. Участник нажимает вкладку "Статистика" в интерфейсе комнаты  
2. Система отображает список просмотренных фильмов с информацией:  
   * Постер и название фильма  
   * Дата просмотра  
   * Средний рейтинг в комнате  
   * Количество участников, оценивших фильм  
   * Индивидуальная оценка пользователя (если ставил)  
3. Участник выбирает конкретный фильм из списка  
4. Система показывает детальную информацию о фильме:  
   * Полное описание  
   * Режиссер и актерский состав  
   * Рейтинг Кинопоиска  
   * Все оценки участников комнаты (анонимно)

---

US-12 \+ US-13: Управление участием

Use Case UC-010: Выйти из комнаты

Акторы: Участник комнаты  
 Цель: Покинуть комнату и прекратить участие в просмотрах  
 Предусловия: Пользователь является участником комнаты

Основной поток:

1. Участник нажимает кнопку "Меню" в интерфейсе комнаты  
2. Участник выбирает опцию "Выйти из комнаты"  
3. Система показывает диалог подтверждения  
4. Участник подтверждает выход  
5. Система удаляет пользователя из списка участников комнаты  
6. Система перенаправляет пользователя на главную страницу  
7. Система уведомляет остальных участников о выходе пользователя

Альтернативный поток A: Пользователь \- создатель комнаты

text

2а. Пользователь является создателем комнаты

2б. Система показывает предупреждение "Вы создатель комнаты. При выходе комната будет удалена"

2в. Use Case переходит к UC-012 (Удалить комнату)  
---

Use Case UC-011: Переключение между комнатами

Акторы: Пользователь  
 Цель: Участвовать в нескольких комнатах одновременно  
 Предусловия: Пользователь авторизован, участник нескольких комнат

Основной поток:

1. Пользователь открывает выпадающий список комнат в заголовке приложения  
2. Система показывает список всех комнат, где пользователь является участником  
3. Пользователь выбирает комнату из списка  
4. Система перенаправляет пользователя в выбранную комнату  
5. Система загружает и отображает интерфейс выбранной комнаты

---

US-14: Передача прав

Use Case UC-012: Передать права создателя

Акторы: Создатель комнаты  
 Цель: Передать роль создателя другому участнику  
 Предусловия: Пользователь \- создатель комнаты, в комнате есть другие участники

Основной поток:

1. Создатель открывает меню управления комнатой  
2. Создатель выбирает опцию "Передать права создателя"  
3. Система отображает список участников комнаты  
4. Создатель выбирает участника из списка  
5. Создатель подтверждает передачу прав  
6. Система передает права создателя выбранному участнику  
7. Система уведомляет всех участников о смене создателя  
8. Система обновляет интерфейс для нового создателя

Альтернативный поток A: Пользователь отменяет передачу

text

5а. Создатель отменяет передачу прав

5б. Система закрывает диалог выбора

5в. Use Case завершается  
---

US-15: Удаление комнаты

Use Case UC-013: Удалить комнату

Акторы: Создатель комнаты  
 Цель: Полностью удалить комнату и всю связанную статистику  
 Предусловия: Пользователь \- создатель комнаты

Основной поток:

1. Создатель открывает меню управления комнатой  
2. Создатель выбирает опцию "Удалить комнату"  
3. Система показывает диалог подтверждения с предупреждением:  
   * "Вся статистика просмотров будет удалена"  
   * "Это действие нельзя отменить"  
4. Создатель вводит название комнаты для подтверждения  
5. Создатель нажимает кнопку "Удалить навсегда"  
6. Система удаляет все данные комнаты:  
   * Информацию о комнате  
   * Список номинаций  
   * Оценки фильмов  
   * Сообщения чата  
7. Система уведомляет всех участников об удалении комнаты  
8. Система перенаправляет создателя на главную страницу

Альтернативный поток A: Неправильное подтверждение

text

4а. Создатель вводит неправильное название комнаты

4б. Система показывает ошибку "Название не совпадает"

4в. Use Case продолжается с шага 3